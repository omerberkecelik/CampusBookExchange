{# templates/registration/login.html #}
{% extends "listings/base.html" %}

{% block title %}Login{% endblock %}

{% block content %}
  <h1 style="margin-bottom: 20px;">Login</h1>

  {% if form.errors %}
    <p style="
        color: #D8000C;
        background-color: #FFD2D2;
        padding: 10px;
        border-radius: 4px;
        max-width: 600px;
        margin-bottom: 20px;
      ">
      Your username and password didn’t match. Please try again.
    </p>
  {% endif %}

  <form method="post"
        action="{% url 'login' %}"
        class="form-container login-form">
    {% csrf_token %}

    <div class="form-field-wrapper">
      <label for="{{ form.username.id_for_label }}">Username:</label>
      {{ form.username }}
      {% if form.username.errors %}
        <div class="error-message">
          {% for error in form.username.errors %}
            {{ error }}<br>
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <div class="form-field-wrapper">
      <label for="{{ form.password.id_for_label }}">Password:</label>
      {{ form.password }}
      {% if form.password.errors %}
        <div class="error-message">
          {% for error in form.password.errors %}
            {{ error }}<br>
          {% endfor %}
        </div>
      {% endif %}
    </div>

    {# Preserve “next” field if Django provided it #}
    <input type="hidden" name="next" value="{{ next }}">

    <button type="submit" class="button">Login</button>
  </form>

  <p style="margin-top: 20px;">
    Don’t have an account?
    <a href="{% url 'listings:register' %}">Register</a>
  </p>
  <p>
    <a href="{% url 'password_reset' %}">Forgot your password?</a>
  </p>
{% endblock %}
